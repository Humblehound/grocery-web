{"version":3,"sources":["start.js"],"names":[],"mappings":";;AAAA,IAAM,UAAU,QAAQ,SAAR,CAAhB;AAAA,IACM,cAAc,CACZ,QADY,EACF,QADE,EACQ,SADR,EACmB,QADnB,EAC6B,SAD7B,EACwC,SADxC,EAEZ,QAFY,EAEF,QAFE,EAEQ,SAFR,EAEmB,SAFnB,EAE8B,SAF9B,EAEyC,SAFzC,CADpB;AAAA,IAKM,aAAa,QAAQ,GAAR,CAAY,QAAZ,IAAwB,YAL3C;;AAOA,IAAI,WAAW,KAAf;;AAEA,QAAQ,EAAR,CAAW,YAAX,EAAyB,UAAS,MAAT,EAAiB;AACxC,MAAI,UAAJ,EAAgB;AACd,QAAI,CAAC,QAAL,EAAe;AACb,cAAQ,IAAR;AACD;AACF,GAJD,MAIO;AACL,YAAQ,IAAR,CAAa,CAAb;AACD;AACF,CARD;;AAUA,IAAI,QAAQ,QAAZ,EAAsB;AACpB,MAAM,cAAc,QAAQ,GAAR,CAAY,oBAAZ,IAAoC,CAAxD;AACA,UAAQ,GAAR,eAAwB,WAAxB;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,WAApB,EAAiC,GAAjC,EAAsC;AACpC,YAAQ,IAAR;AACD;AACD,MAAI,UAAJ,EAAgB;AACd,gBAAY,OAAZ,CAAoB,UAAU,MAAV,EAAkB;AACpC,cAAQ,EAAR,CAAW,MAAX,EAAmB,YAAY;AAC7B,gBAAQ,GAAR,UAAmB,MAAnB;AACA,mBAAW,IAAX;AACA,gBAAQ,UAAR,CAAmB,YAAY;AAC7B,kBAAQ,GAAR,CAAY,+BAAZ;AACA,kBAAQ,IAAR,CAAa,CAAb;AACD,SAHD;AAID,OAPD;AAQD,KATD;AAUD;AACF,CAlBD,MAkBO;AACL,UAAQ,UAAR;AACD","file":"start-compiled.js","sourcesContent":["const cluster = require('cluster'),\n      stopSignals = [\n        'SIGHUP', 'SIGINT', 'SIGQUIT', 'SIGILL', 'SIGTRAP', 'SIGABRT',\n        'SIGBUS', 'SIGFPE', 'SIGUSR1', 'SIGSEGV', 'SIGUSR2', 'SIGTERM'\n      ],\n      production = process.env.NODE_ENV == 'production';\n\nlet stopping = false;\n\ncluster.on('disconnect', function(worker) {\n  if (production) {\n    if (!stopping) {\n      cluster.fork();\n    }\n  } else {\n    process.exit(1);\n  }\n});\n\nif (cluster.isMaster) {\n  const workerCount = process.env.NODE_CLUSTER_WORKERS || 4;\n  console.log(`Starting ${workerCount} workers...`);\n  for (let i = 0; i < workerCount; i++) {\n    cluster.fork();\n  }\n  if (production) {\n    stopSignals.forEach(function (signal) {\n      process.on(signal, function () {\n        console.log(`Got ${signal}, stopping workers...`);\n        stopping = true;\n        cluster.disconnect(function () {\n          console.log('All workers stopped, exiting.');\n          process.exit(0);\n        });\n      });\n    });\n  }\n} else {\n  require('./app.js');\n}\n"]}