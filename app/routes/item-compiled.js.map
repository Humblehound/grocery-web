{"version":3,"sources":["item.js"],"names":[],"mappings":"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","file":"item-compiled.js","sourcesContent":["let mongoose = require('mongoose');\nlet Item = require('../models/item');\nlet ItemCount = require('../models/itemCount');\n\nfunction postItem(req, res) {\n    var newItem = new Item(req.body);\n\n    newItem.save((err, item) => {\n        if (err) {\n            res.send(err);\n        }\n        else { //If no errors, send it back to the client\n            res.json({message: \"Item successfully added!\", item});\n        }\n    })\n}\n\nfunction getItem(req, res) {\n    Item.findById(req.params.id, (err, item) => {\n        if (err) res.send(err);\n        res.json(item);\n    });\n}\n\nfunction getItems(req, res) {\n    console.log(req.query.userId)\n    Item.find({'owner': req.query.userId}, (err, data) => {\n        if (err) res.send(err);\n        res.status(200).json(data);\n    });\n}\n\nfunction deleteItem(req, res) {\n    Item.remove({_id: req.params.id}, (err, result) => {\n        res.json({message: \"Item successfully deleted\", result})\n    })\n}\n\nfunction updateItem(req, res) {\n    Item.findById({_id: req.params.id}, (err, item) => {\n        if (err) res.send(err);\n        Object.assign(item, req.body).save((err, item) => {\n            if (err) res.send(err);\n            res.json({message: 'Item updated!', item});\n        })\n    })\n}\n\nfunction synchronize(req, res) {\n    console.log(req.body);\n    ItemCount.findOne({item: req.body.item, device: req.body.device}, (err, item) => {\n        if (err) res.send(err);\n        if (item == null) {\n            var newItemCount = new ItemCount(req.body);\n            newItemCount.save((err, item) => {\n                if (err) {\n                    res.send(err);\n                } else {\n                    ItemCount.find({item: req.body.item}, (err, items) => {\n                        if (err) {\n                            res.send(err);\n                        } else {\n                            console.log(items);\n                            res.json(items);\n                        }\n                    });\n                }\n            })\n        } else {\n            Object.assign(item, req.body).save((err, item) => {\n                if (err) {\n                    res.send(err);\n                } else {\n                    ItemCount.find({item: req.body.item}, (err, items) => {\n                        if (err) {\n                            res.send(err);\n                        } else {\n                            console.log(items);\n                            res.json(items);\n                        }\n\n                    });\n                }\n\n            })\n        }\n    })\n}\n\n\n//export all the functions\nmodule.exports = {getItem, getItems, postItem, deleteItem, updateItem, synchronize};"]}